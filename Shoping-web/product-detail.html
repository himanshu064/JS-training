<!DOCTYPE html>
<html>
<head>
    <title>Product Detail</title>
    <link rel="stylesheet" href="./shp-web.css">
</head>
<body>
    <h1>Product Detail</h1>
    <div id="productDetail" class="product-detail">
    </div>
<div>
    Quantity:
    <button onclick="decreaseQuantity()">-</button>
    <span id="quantity">1</span>
    <button onclick="increaseQuantity()">+</button>
    Total Price: <span id="totalPrice">$0.00</span>
    <button onclick="addToCart()">Add to Cart</button>
    <button onclick="navigateToCart()">See Cart</button>
</div>

    <script>
        async function getProductDetail(productId) {
            try {
                const response = await fetch(`https://dummyjson.com/products/${productId}`);
                const product = await response.json();
                return product;
            } catch (error) {
                console.error('Error fetching product detail:', error);
                return null;
            }
        }

        let currentQuantity = 1;
        let productPrice = 0;
        let selectedProduct = null;

        async function displayProductDetail() {
            const productDetailContainer = document.getElementById('productDetail');

            // Get product id
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const productId = parseInt(urlParams.get('id'));

            // Get product detail
            selectedProduct = await getProductDetail(productId);
            if (selectedProduct) {
                productPrice = selectedProduct.price; 
                productDetailContainer.innerHTML = `
                    <h2>${selectedProduct.title}</h2>
                    <img src="${selectedProduct.thumbnail}" alt="${selectedProduct.title}" width="100">
                    <p>Price: $${selectedProduct.price}</p>
                    <p>${selectedProduct.description}</p>
                `;
                updateTotalPrice();
            } else {
                productDetailContainer.innerHTML = '<p>Product not found</p>';
            }
        }

        function decreaseQuantity() {
            if (currentQuantity > 1) {
                currentQuantity--;
                updateQuantityDisplay();
                updateTotalPrice();
            }
        }

        function increaseQuantity() {
            currentQuantity++;
            updateQuantityDisplay();
            updateTotalPrice();
        }

        function updateQuantityDisplay() {
            const quantitySpan = document.getElementById('quantity');
            quantitySpan.textContent = currentQuantity;
        }

        function updateTotalPrice() {
            const totalPriceSpan = document.getElementById('totalPrice');
            const total = (currentQuantity * productPrice).toFixed(2); // Calculate total price
            totalPriceSpan.textContent = `$${total}`;
        }

       // ... Existing code ...

function addToCart() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const cartItem = {
        id: selectedProduct.id,
        title: selectedProduct.title,
        price: selectedProduct.price,
        thumbnail: selectedProduct.thumbnail,
        quantity: currentQuantity
    };
    cart.push(cartItem);
    localStorage.setItem('cart', JSON.stringify(cart));
    alert('Item added to cart!');
}


function navigateToCart() {
    window.location.href = 'cart.html';
}


        window.onload = () => {
            displayProductDetail();
            updateQuantityDisplay();
        };
    </script>
</body>
</html>
